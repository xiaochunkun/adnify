# 更新日志 | Changelog

> 每一次更新，都是一杯新泡的茶 ☕

所有重要更改都会记录在此文件中。格式基于 [Keep a Changelog](https://keepachangelog.com/)，版本号遵循 [Semantic Versioning](https://semver.org/)。

## 贡献者 | Contributors

感谢所有为 Adnify 做出贡献的开发者！你们是最棒的 🎉

<!-- ALL-CONTRIBUTORS-LIST:START -->
<a href="https://github.com/adnaan-worker"><img src="https://github.com/adnaan-worker.png" width="50" height="50" style="border-radius:50%" alt="adnaan"/></a>
<a href="https://github.com/kerwin2046"><img src="https://github.com/kerwin2046.png" width="50" height="50" style="border-radius:50%" alt="kerwin"/></a>
<!-- ALL-CONTRIBUTORS-LIST:END -->

---

## [1.5.15] - 2026-01-16 🧠 AI 终于懂你的项目了

> "不用再解释项目结构了，AI 自己会看" —— 懒人福音

### ✨ 新功能
- 🧠 **双模式索引架构** - 结构化索引（零配置本地）+ 语义索引（Embedding API），想用哪个用哪个
- 📊 **项目摘要注入** - AI 自动获取项目结构、技术栈、关键文件，再也不用手动介绍项目了
- 🔍 **BM25 + 符号搜索** - 结构化模式下的混合搜索，找代码又快又准
- 💾 **索引持久化** - 重启后不用重新索引，缓存都给你存好了
- 🎯 **项目类型检测** - 自动识别 Electron/React/Vue/Next.js 等框架和技术栈

### 🔧 优化
- ⚡ **索引设置 UI** - 全新的双模式切换界面，结构化模式标记为"推荐"
- 📦 **配置统一** - `indexConfig` 一个 key 管所有索引配置，不再分散
- 🔇 **Tree-sitter 警告** - 终于把那个烦人的 eval 警告干掉了
- 🎨 **摘要格式优化** - 符号带图标（📦 类、ƒ 函数），目录带文件数

### 🐛 Bug 修复
- 🔄 **Chat 模式摘要** - 之前只有 Agent 模式有项目摘要，现在 Chat 模式也有了
- 🔧 **IPC 初始化** - 修复获取状态/摘要时服务未初始化的问题
- 🛡️ **搜索错误处理** - `codebase_search` 工具不再返回神秘的 "Unknown error"

---

## [1.5.14] - 2026-01-16 🔧 终端管理优化

> "关了就是关了，别给我留尾巴" —— 强迫症患者的心声

### 🐛 Bug 修复
- 🖥️ **终端空白问题** - 关闭面板后再打开不再是空白了，会自动创建新终端
- 📦 **模块路径修复** - 打包后 `shared/constants` 找不到的问题搞定了
- ⚙️ **Git 白名单保存** - 保存设置后 Git 命令不再失效

### ✨ 新功能
- 🛡️ **命令白名单 UI** - 设置里可以编辑 Shell 和 Git 命令白名单了

### 🔧 优化
- 🚀 **启动优化** - 终端面板不再自动创建，用户打开时才创建
- 📝 **TypeScript 配置** - 整理了 tsconfig，IDE 不再报红了
- 🧹 **进程清理** - 关闭终端面板时会清理所有终端进程

---

## [1.5.13] - 2026-01-15 ☕ 泡了杯龙井，修了个终端

> "终端空白？不存在的。" —— 某位不愿透露姓名的开发者

### ✨ 新功能
- ⚙️ **MCP 自动连接开关** - 终于可以控制 MCP 服务器是否自动连接了，不想连就不连，任性！

### 🐛 Bug 修复
- 🖥️ **终端空白问题** - 切换工作区后终端不再装死，乖乖显示内容
- 🔧 **PTY 创建检查** - 修复了一个"我以为成功了但其实没有"的尴尬 bug

### 🚀 性能优化
- ⚡ **启动加速** - MCP 服务改为延迟初始化，启动快了那么一丢丢
- 🧹 **代码瘦身** - 清理了一堆"为了兼容而存在"的代码，轻装上阵

---

## [1.5.12] - 2026-01-15 🔍 搜索引擎大换血

> 告别 Serper，拥抱 Google PSE，省钱又好用

### ✨ 新功能
- 🔄 **检查点回滚增强** - 回滚时连图片和上下文都给你恢复，贴心不？
- 🔍 **网络搜索重构** - Google PSE + DuckDuckGo 双引擎，搜啥都行
- ⚙️ **搜索配置界面** - 设置里就能配 Google API，不用改代码了
- 🌐 **Jina Reader 集成** - read_url 现在能读 JS 渲染的页面了，SPA 也不怕

### 🐛 Bug 修复
- � **表格渲染f** - AI 输出的表格终于正常显示了 (感谢 @kerwin)

### 🚀 优化
- ⬆️ **Electron 39** - 升级框架，修复安全漏洞
- � *持*搜索提示优化** - 教会 AI 一次搜完，别分三次
- ⏱️ **超时调整** - read_url 默认 60 秒，慢网站也能抓

### 🔧 重构
- 🧠 **压缩管理器** - 上下文压缩逻辑整合，代码更清爽

---

## [1.5.11] - 2026-01-15 🛡️ 类型安全加固

> 把 any 赶出代码库的一天

### � Bug 修复
- 🔧 **跨平台兼容** - Performance 类型问题搞定
- � **依赖同改步** - package-lock.json 终于和 package.json 对上了

### 🔧 重构
- 🛡️ **类型安全** - 移除不安全的类型断言 (感谢 @kerwin)
- 🧪 **测试重组** - 测试结构更清晰，覆盖更全面

---

## [1.5.10] - 2026-01-14 ✨ 富文本来了

> Agent 的输出终于不只是纯文本了

### ✨ 新功能
- 🎨 **富文本支持** - Agent 工具执行结果支持多种格式

### �类 Bug 修复
- 🔇 **生产环境静音** - 控制台不再刷屏
- ⏱️ **更新检查** - 不再无限等待 (#12)

### 🔧 重构
- 🛡️ **类型改进** - 又干掉了一批 any (感谢 @kerwin)

---

## [1.5.9] - 2026-01-14 📟 终端进化

> 终端现在会告诉你它怎么了

### ✨ 新功能
- 📟 **终端事件** - PTY 退出和错误都有事件通知了

### 🐛 Bug 修复
- ⏱️ **更新检查** - 修复挂起问题
- 🔧 **路径处理** - 更健壮的验证和日志

### 🚀 优化
- 🍎 **CI 发布** - macOS arm64 文件名统一

---

## [1.5.8] - 2026-01-14 🔒 安全小补丁

### 🐛 Bug 修复
- �  **路径验证** - 更严格的文件处理

---

## [1.5.7] - 2026-01-14 🔀 Git 分支侦探

> 分支检测失败？我有 Plan B！

### � Bug 修复
- 🔀 **Git 分支检测** - 添加回退方法，再也不会显示 HEAD 了
- 🐛 **提示词预览** - MiniMax 2.1 think 标签显示正常了 (感谢 @kerwin)

### 🔧 重构
- 🏗️ **工具执行优化** - 审批流程和快照管理
- �️ A**类型安全** - 继续消灭 any (感谢 @kerwin)
- 📝 **日志统一** - console 全换成 Logger (感谢 @kerwin)

---

## [1.5.6] - 2026-01-14 🛠️ Agent 大重构

> 代码量减少了，功能却更强了

### ✨ 新功能
- 🛠️ **审批工作流** - 工具执行前可以审批了
- 🎯 **动态工具过滤** - 根据模式自动过滤可用工具
- � *复*Agent 指南** - 工具使用文档更完善

### 🔧 重构
- 🏗️ **Agent 架构** - 核心循环和上下文压缩重组
- 🧠 **压缩管理器** - 统一管理，统计更清晰
- 📋 **Prompt 系统** - 类型定义整合

### 🐛 Bug 修复
- 🐛 **提示词预览** - 显示问题修复
- � **Git  分支** - 不再显示 HEAD

---

## [1.5.5] - 2026-01-13 📖 文档日

### ✨ 新功能
- 📖 **Agent 指南** - 工具使用文档更完善

### � Bulg 修复
- 🔧 **Monaco 类型** - 配置覆盖说明 (感谢 @kerwin)

---

## [1.5.4] - 2026-01-12 🤖 AI 能力升级

> 更聪明的 Agent，更好用的工具

### ✨ 新功能
- 🤖 **文件处理增强** - Agent 更懂文件操作了
- �  **Google AI SDK** - 消息处理更强
- 🎨 **GPT Tokenizer** - 上下文管理更精准
- 📥 **API 导入向导** - 配置解析更智能
- 🎯 **ask_user 工具** - 计划模式工作流指南

### � 重构：
- 🛡️ **TypeScript 优化** - 类型守卫加持 (感谢 @kerwin)
- ⚡ **App 性能** - 组件优化 (感谢 @kerwin)

### 🐛 Bug 修复
- 🔧 **更新安装** - 日志和延迟执行优化
- 📦 **CI 发布** - 多架构元数据处理

---

## [1.5.2] - 2026-01-12 📚 社区建设

### ✨ 新功能
- � **贡献系指南** - 欢迎来贡献代码！

---

## [1.5.1] - 2026-01-10 🔧 稳定性修复

### 🐛 Bug 修复
- �  **CI 内存溢出** - 降级 electron-builder 确保稳定
- 🎨 **Regenerate 按钮** - 位置和国际化修复
- 📝 **外部修改对话框** - AI 编辑后不再误报
- 🔌 **Monaco API** - v0.55 兼容性修复

---

## [1.5.0] - 2026-01-10 🎉 自动更新上线！

> 终于不用手动下载了

### ✨ 新功能
- 🔄 **自动更新** - 安装版自动下载安装，便携版提示下载
- 🧠 **4 级压缩** - L4 自动切换新会话并携带摘要
- � **压缩可视化** `- 状态栏显示压缩级别和动画

---

## [1.4.0] - 2026-01-09 🖼️ 视觉能力解锁

> AI 终于能看图了！

### ✨ 新功能
- 🖼️ **图片输入** - LLM 支持视觉能力
- ✨ **UI 美化** - shimmer 效果、滚动阴影、毛玻璃优化

### 🔧 重构
- �️模 **Agent 架构** - 统一上下文管理，优化 Prompt 系统

---

## [1.3.8] - 2026-01-06 🛠️ LSP 修复日

### 🐛 Bug 修复
- 🛠️ **Deno LSP** - TypeScript 项目不再误触发
- � *d*生产日志** - 自动禁用控制台输出
- 🔄 **MCP 初始化** - 不再重复初始化

### 🔧 重构
- 🔧 **类型系统** - 统一 `@shared/types` 为单一来源

---

## [1.3.7] - 2026-01-05 🌳 语法解析大升级

### ✨ 新功能
- 🌳 **Tree-sitter** - 新增 20+ 语言支持
- 📁 **LSP 目录** - 支持自定义安装路径
- 🔍 **智能根目录** - 自动识别 monorepo 子项目
- 📊 **LSP 指示器** - 状态栏显示服务器状态

---

## [1.3.0] - 2026-01-02 🎯 模型选择器重构

### ✨ 新功能
- 🎯 **模型选择器** - 聊天面板新增下拉选择
- ✨ **自定义 Embedding** - 支持配置自定义 API
- 🔍 **混合搜索** - RRF 结果融合
- ⚡ **Embedding 限流** - 速率限制和重试

### 🔧 重构
- 🏗️ **Provider 架构** - 统一厂商配置存储
- 🛠️ **Result 类型** - 统一 IPC 返回类型
- 📝 **Editor 拆分** - 提取子组件

### 🚀 优化
- 🚀 **流式缓冲** - requestAnimationFrame 优化

---

## [1.2.9] - 2026-01-01 🔌 MCP 协议支持

> 新年第一天，MCP 来了！

### ✨ 新功能
- 🔌 **MCP 协议** - 集成 Model Context Protocol
- 📄 **富文本渲染** - 支持 Markdown/图片/表格
- 🎯 **UI/UX 设计系统** - 新增设计数据库

---

## [1.2.8] - 2025-12-31 🔒 安全加固

### 🔒 安全
- 🔒 **文件监听器** - 安全性优化
- 🔒 **终端命令** - 执行安全性优化

---

## [1.2.7] - 2025-12-31 🍞 Toast 重构

> 2025 年的最后一天，重构了 Toast

### 🔧 重构
- 🍞 **Toast 系统** - 全新的通知提示系统

---

> 🎊 感谢使用 Adnify！有问题欢迎提 Issue，有想法欢迎 PR！
